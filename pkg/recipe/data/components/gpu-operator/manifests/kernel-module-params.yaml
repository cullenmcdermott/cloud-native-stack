# Kernel Module Params ConfigMap for GPU Operator (GB200)
# Generated by CNS - included via Helm umbrella chart for GB200 accelerator
#
# This ConfigMap contains kernel module parameters required for GB200 accelerator.
# The nvidia.conf file sets NVreg_GrdmaPciTopoCheckOverride=1 which is needed
# for proper RDMA/PCIe topology handling on GB200 systems.
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kernel-module-params
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/managed-by: {{ .Release.Service }}
    helm.sh/chart: {{ .Chart.Name }}-{{ .Chart.Version }}
data:
  nvidia.conf: |
    options nvidia NVreg_GrdmaPciTopoCheckOverride=1
